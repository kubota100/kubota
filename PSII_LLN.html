<!DOCTYPE html>
<html>

<head>
 <meta charset="utf-8">
 <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
 <title>PSII_LLN</title>
 <link rel="stylesheet" href="mystyle.css">
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css" crossorigin="anonymous">
 <script defer src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js" crossorigin="anonymous"></script>
 <script defer src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>

 <script>
     window.onload = function() {
     renderMathInElement(document.body, {delimiters: [
         {left: "\\[", right: "\\]", display: true},
         {left: "$", right: "$", display: false}
     ]});
     };
 </script>

<script>
    let counter10 = 0;
    for(let i=0; i<10; i++){
        if( Math.floor(Math.random()*2) == 0){
            counter10++;
        }
    }
    let ratio10 = counter10 / 10;
    console.log(ratio10.toFixed(4));

    let counter100 = 0;
    for(let i=0; i<100; i++){
        if( Math.floor(Math.random()*2) == 0){
            counter100++;
        }
    }
    let ratio100 = counter100 / 100;
    console.log(ratio100.toFixed(4));

    let counter10000 = 0;
    for(let i=0; i<10000; i++){
        if( Math.floor(Math.random()*2) == 0){
            counter10000++;
        }
    }
    let ratio10000 = counter10000 / 10000;
    console.log(ratio10000.toFixed(4));



    /*
    let data = [78, 68, 47, 74, 67, 46, 52, 48, 54, 44, 55, 48, 78, 49, 93, 70, 63, 72, 68, 73, 43, 26, 74, 56, 61, 58, 55, 73, 33, 67, 76, 64, 62, 54, 52, 59, 75, 67,
    49, 64, 84, 61, 78, 35, 65, 52, 85, 82, 75, 44, 32, 55, 85, 30, 60, 83, 37, 68, 98, 52, 85, 79, 67, 84, 75, 62, 87, 60];
    let num_of_data = data.length; //Math.floor(Math.random()*3 + 3);

    let data_in_text = "";
    for(let i=0; i<num_of_data; i++){
        data_in_text += data[i] + ",　";
    }
    data_in_text = data_in_text.slice(0, -2);

    let pop_mean = average(data);
    pop_mean = Math.round(pop_mean*1000)/1000;
    let pop_var = average(square(data)) - average(data)**2;
    pop_var = Math.round(pop_var*1000)/1000;

    let sample_means = [];
    let sample_vars = [];
    let sample_unvars = [];
    //サイズ10のサンプルをとる。

    for(i=0; i<10000; i++){
        let sample = [];
        for(let i=0; i<10; i++){
            sample.push(data[Math.floor(Math.random()*68)])
        }
        sample_means.push(average(sample));
        let tmp = average(square(sample)) - average(sample)**2;    
        sample_vars.push(tmp);
        sample_unvars.push(10*tmp/9);
    }
    
    let sample_means_mean = average(sample_means);
    sample_means_mean = Math.round(sample_means_mean*1000)/1000;
    let sample_vars_mean = average(sample_vars);
    sample_vars_mean = Math.round(sample_vars_mean*1000)/1000;
    let sample_unvars_mean = average(sample_unvars);
    sample_unvars_mean = Math.round(sample_unvars_mean*1000)/1000;

    console.log(sample_means_mean);
    console.log(sample_vars_mean);
    console.log(sample_unvars_mean);
    */





    ///////////////////////////////////////////////

    function average(array){
        let n = array.length;
        let result = 0;
        for(let i=0; i<n; i++){
            result += array[i];
        }
        result /= n;
        return result;
    }

    function expectation(array_var, array_prob){
        let result = 0;
        for(let i=0; i<array_var.length; i++){
            result += array_var[i]*array_prob[i];
        }
        return result;
    }

    function square(array){
        let result = [];
        let num = array.length;
        for(let i=0; i<num; i++){
            result.push(array[i]**2);
        }
        return result;        
    }

//    function generate_quizzes(){
    document.addEventListener("DOMContentLoaded", function() {
        document.getElementById("q1_id").textContent = `${ratio10.toFixed(4)}`;
        document.getElementById("q2_id").textContent = `${ratio100.toFixed(4)}`;
        document.getElementById("q3_id").textContent = `${ratio10000.toFixed(4)}`;
    })

    function show_answer(e){
        let identifier = e.id;
        document.getElementById("a"+identifier).style.color = "black";
    }
</script>
</head>

<body class="container">
 <center>
    <h1>コイン投げの実験</h1>
 </center>
 <p>
    公平なコインを $n$ 回投げて、表が出た回数 $k$ を数える。
    このとき、表が出た割合 $\frac{k}{n}$ は、$n$ が大きくなるにつれてどのように変わるだろうか？
    このページを再読み込みするたびに、あなたのパソコンやスマートフォンが一瞬で実験してくれる。
    結果は次のとおりである。
 </p>
 <table border="1">
    <tr>
      <th>n</th>
      <th>表の割合 k/n </th>
    </tr>
    <tr>
      <td>10</td>
      <td><b><span id="q1_id" style="color: blue;"></span></b></td>
    </tr>
    <tr>
      <td>100</td>
      <td><b><span id="q2_id" style="color: blue;"></span></b></td>
    </tr>
    <tr>
      <td>10000</td>
      <td><b><span id="q3_id" style="color: blue;"></span></b></td>
    </tr>
  </table>
  
 <!--
 $n$回なげて$k$回表が出たとすると\AMI{表が出た割合}$\frac{k}{n}$は… \\
\AMI{直感的な話、ぴったり$1/2$にはなかなかならないけど、こんな表になってそう} \\

 教科書 p8, 例2.1 にある68個のデータを母集団とみなす。
 母平均は <span id="q2_id"></span> であり、母分散は <span id="q3_id"></span> である。
 「サイズ10の標本をとり、標本平均・標本分散・不偏分散を記録する」という操作を10000回繰り返すと、<br> <br>
 　　10000個の標本平均の平均は <span id="q4_id"></span>, <br>
 　　10000個の標本分散の平均は <span id="q5_id"></span>, <br>
 　　10000個の不偏分散の平均は <span id="q6_id"></span> <br> <br>
 となる。標本分散の平均はいつも母分散より少し小さく、不偏分散の平均の方が母分散に近いことが確かめられる。<br>
 -->
</body>
</html>
