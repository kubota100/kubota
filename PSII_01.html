<!DOCTYPE html>
<html>

<head>
 <meta charset="utf-8">
 <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
 <title>PSII_01</title>
 <link rel="stylesheet" href="mystyle.css">
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css" crossorigin="anonymous">
 <script defer src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js" crossorigin="anonymous"></script>
 <script defer src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>

 <script>
     window.onload = function() {
     renderMathInElement(document.body, {delimiters: [
         {left: "\\[", right: "\\]", display: true},
         {left: "$", right: "$", display: false}
     ]});
     };
 </script>

<script>
    let num_of_data = Math.floor(Math.random()*5 + 11);
    let data = [];
    for(let i=0; i<num_of_data; i++){
        let tmp = 0;
        tmp = (Math.random()*61+40) + (Math.random()*61+40) + (Math.random()*61+40);
        tmp = Math.floor(tmp/3);
        data.push(tmp);
    }
    console.log(data);

    let freq = []; //freq[0]は40~50の階級, freq[5]は90~100の階級
    for(let i=0; i<6; i++){
        counter = 0;
        for(let j=0; j<num_of_data; j++){
            if(data[j] >= 40+10*i && data[j] < 50+10*i){
                counter++;
            }
        }
        freq.push(counter);
    }
    console.log(freq);

    let relative_freq = [];
    for(let i=0; i<6; i++){
        let tmp = freq[i]/num_of_data;
        tmp = Math.round(tmp*100)/100;
        relative_freq.push(tmp);
    }
    console.log(relative_freq);

    let data_in_text = "";
    for(let i=0; i<num_of_data; i++){
        data_in_text += data[i] + ",　";
    }
    data_in_text = data_in_text.slice(0, -2);

    function generate_quizzes(){
        document.getElementById("q1_id").textContent = data_in_text;

        document.getElementById("a1_id").textContent = freq[0];
        document.getElementById("a2_id").textContent = freq[1];
        document.getElementById("a3_id").textContent = freq[2];
        document.getElementById("a4_id").textContent = freq[3];
        document.getElementById("a5_id").textContent = freq[4];
        document.getElementById("a6_id").textContent = freq[5];

        document.getElementById("a7_id").textContent = relative_freq[0];
        document.getElementById("a8_id").textContent = relative_freq[1];
        document.getElementById("a9_id").textContent = relative_freq[2];
        document.getElementById("a10_id").textContent = relative_freq[3];
        document.getElementById("a11_id").textContent = relative_freq[4];
        document.getElementById("a12_id").textContent = relative_freq[5];

        document.getElementById("a13_id").textContent = num_of_data;
    }

    function show_answer(e){
        let identifier = e.id;
        for(let i=1; i<14; i++){
            document.getElementById("a"+ i + identifier).style.color = "red";
        }

    }
</script>
</head>

<body onload="generate_quizzes()">
<div class="container">
  <h1>度数分布表</h1>
 <p>
 次はある試験の結果（100点満点）のローデータである。
 </p>
 <p>　　<span id="q1_id"></span></p>
 <p>以下の度数分布表をうめよ。相対度数は数値が割り切れない場合は小数第2位まで答えよ（小数第3位を四捨五入せよ）。　　<button id="_id" onclick="show_answer(this)">答え</button></p>

 <p>
  <center>
    <table border = "1">
        <tr>
          <td bgcolor="lightgrey">階級</td>
          <td bgcolor="lightgrey">度数</td>
          <td bgcolor="lightgrey">相対度数</td>
        </tr>
        <tr>
            <td>40−50</td>
            <td><span id="a1_id" style="color:white"></span></td>
            <td><span id="a7_id" style="color:white"></span></td>
          </tr>
          <tr>
            <td>50−60</td>
            <td><span id="a2_id" style="color:white"></td>
            <td><span id="a8_id" style="color:white"></span></td>
          </tr>
          <tr>
            <td>60−70</td>
            <td><span id="a3_id" style="color:white"></span></td>
            <td><span id="a9_id" style="color:white"></span></td>
          </tr>
          <tr>
            <td>70−80</td>
            <td><span id="a4_id" style="color:white"></span></td>
            <td><span id="a10_id" style="color:white"></span></td>
          </tr>
          <tr>
            <td>80−90</td>
            <td><span id="a5_id" style="color:white"></span></td>
            <td><span id="a11_id" style="color:white"></span></td>
          </tr>
          <tr>
            <td>90−100</td>
            <td><span id="a6_id" style="color:white"></span></td>
            <td><span id="a12_id" style="color:white"></span></td>
          </tr>
          <td>合計</td>
          <td><span id="a13_id" style="color:white"></span></td>
          <td>1.00</td>
        </tr>
      </table>
    </center>
  </p>
</div>
</body>
</html>
