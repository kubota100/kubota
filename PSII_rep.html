<!DOCTYPE html>
<html>

<head>
 <meta charset="utf-8">
 <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
 <title>PSII_rep</title>
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.16/dist/katex.min.css" integrity="sha384-6LkG2wmY8FK9E0vU9OOr8UvLwsaqUg9SETfpq4uTCN1agNe8HRdE9ABlk+fVx6gZ" crossorigin="anonymous">
 <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.16/dist/katex.min.js" integrity="sha384-31El76TwmbHj4rF9DyLsygbq6xoIobG0W+jqXim+a3dU9W53tdH3A/ngRPxOzzaB" crossorigin="anonymous"></script>
 <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.16/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"></script>
 <script>
   document.addEventListener("DOMContentLoaded", function() {
     renderMathInElement(document.body, {delimiters: [
       {left: "\\[", right: "\\]", display: true},
       {left: "$", right: "$", display: false}
     ]});
   });
   </script>
 <script>
   document.addEventListener("DOMContentLoaded", function() {
       setTimeout(function() { 
           renderMathInElement(document.body, {delimiters: [
       {left: "\\[", right: "\\]", display: true},
       {left: "$", right: "$", display: false}
     ]});
           },100)
   });
   </script>
 <style>
    ol.list_parentheses{
        padding:0 0 0 2em;
        margin:0;
    }
    ol.list_parentheses li{
        list-style-type:none;
        list-style-position:inside;
        counter-increment: cnt;
    }
    ol.list_parentheses li:before{
        display: marker;
        content: "(" counter(cnt) ") ";
    }
</style>
<style>
    .container {
            margin: 0;
        }
    
        /* PCの画面サイズの場合のみ左右に幅800pxを設定 */
        @media screen and (min-width: 680px) {
            .container {
                width: 700px;
                margin-left: auto; /* 左右中央に配置 */
                margin-right: auto;
            }
        }
</style>

<script>
    let data = [78, 68, 47, 74, 67, 46, 52, 48, 54, 44, 55, 48, 78, 49, 93, 70, 63, 72, 68, 73, 43, 26, 74, 56, 61, 58, 55, 73, 33, 67, 76, 64, 62, 54, 52, 59, 75, 67,
    49, 64, 84, 61, 78, 35, 65, 52, 85, 82, 75, 44, 32, 55, 85, 30, 60, 83, 37, 68, 98, 52, 85, 79, 67, 84, 75, 62, 87, 60];
    let num_of_data = data.length; //Math.floor(Math.random()*3 + 3);

    let data_in_text = "";
    for(let i=0; i<num_of_data; i++){
        data_in_text += data[i] + ",　";
    }
    data_in_text = data_in_text.slice(0, -2);

    let pop_mean = average(data);
    pop_mean = Math.round(pop_mean*1000)/1000;
    let pop_var = average(square(data)) - average(data)**2;
    pop_var = Math.round(pop_var*1000)/1000;

    let sample_means = [];
    let sample_vars = [];
    let sample_unvars = [];
    //サイズ10のサンプルをとる。

    for(i=0; i<10000; i++){
        let sample = [];
        for(let i=0; i<10; i++){
            sample.push(data[Math.floor(Math.random()*68)])
        }
        sample_means.push(average(sample));
        let tmp = average(square(sample)) - average(sample)**2;    
        sample_vars.push(tmp);
        sample_unvars.push(10*tmp/9);
    }
    
    let sample_means_mean = average(sample_means);
    sample_means_mean = Math.round(sample_means_mean*1000)/1000;
    let sample_vars_mean = average(sample_vars);
    sample_vars_mean = Math.round(sample_vars_mean*1000)/1000;
    let sample_unvars_mean = average(sample_unvars);
    sample_unvars_mean = Math.round(sample_unvars_mean*1000)/1000;

    console.log(sample_means_mean);
    console.log(sample_vars_mean);
    console.log(sample_unvars_mean);





    ///////////////////////////////////////////////

    function average(array){
        let n = array.length;
        let result = 0;
        for(let i=0; i<n; i++){
            result += array[i];
        }
        result /= n;
        return result;
    }

    function expectation(array_var, array_prob){
        let result = 0;
        for(let i=0; i<array_var.length; i++){
            result += array_var[i]*array_prob[i];
        }
        return result;
    }

    function square(array){
        let result = [];
        let num = array.length;
        for(let i=0; i<num; i++){
            result.push(array[i]**2);
        }
        return result;        
    }

    function generate_quizzes(){
        // document.getElementById("q1_id").textContent = data_in_text;
        document.getElementById("q2_id").textContent = "$\\mu = " + pop_mean + "$";
        document.getElementById("q3_id").textContent = "$\\sigma^2 =" + pop_var + "$";
        document.getElementById("q4_id").textContent = "$" + sample_means_mean + "$";
        document.getElementById("q5_id").textContent = "$" + sample_vars_mean + "$";
        document.getElementById("q6_id").textContent = "$" + sample_unvars_mean + "$";
    }

    function show_answer(e){
        let identifier = e.id;
        document.getElementById("a"+identifier).style.color = "black";
    }
</script>
</head>

<body onload="generate_quizzes()">
 <div class="container">
 <center>
    <h1>不偏推定量についての実験</h1>
 </center>

 教科書 p8, 例2.1 にある68個のデータを母集団とみなす。
 母平均は <span id="q2_id"></span> であり、母分散は <span id="q3_id"></span> である。
 「サイズ10の標本をとり、標本平均・標本分散・不偏分散を記録する」という操作を10000回繰り返すと、<br> <br>
 　　10000個の標本平均の平均は <span id="q4_id"></span>, <br>
 　　10000個の標本分散の平均は <span id="q5_id"></span>, <br>
 　　10000個の不偏分散の平均は <span id="q6_id"></span> <br> <br>
 となる。標本分散の平均はいつも母分散より少し小さく、不偏分散の平均の方が母分散に近いことが確かめられる。<br>
 </div>
</body>
</html>
